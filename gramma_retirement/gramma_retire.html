<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gramma Mac's Retirement</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <h1>Gramma Mac's Retirement</h1>
        <p>Comprehensive Retirement Planning Tool</p>
    </header>
    
    <div class="container">
        <div class="card">
            <h2>
                Income Sources
                <span class="tooltip">ⓘ
                    <span class="tooltip-text">List all your regular income sources including Social Security, pensions, and other annuities.</span>
                </span>
            </h2>
            <table id="annuity-table" style="border-collapse: collapse;border-spacing: 0;">
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Monthly ($)</th>
                        <th>Yearly ($)</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><input type="text" value="Social Security"></td>
                        <td><input type="number" class="monthly-input small-input" value="1500" data-row="0"></td>
                        <td><input type="number" class="yearly-input small-input" value="18000" data-row="0"></td>
                        <td><button class="delete" onclick="deleteAnnuity(this)">Delete</button></td>
                    </tr>
                    <tr>
                        <td><input type="text" value="Pension"></td>
                        <td><input type="number" class="monthly-input small-input" value="1000" data-row="1"></td>
                        <td><input type="number" class="yearly-input small-input" value="12000" data-row="1"></td>
                        <td><button class="delete" onclick="deleteAnnuity(this)">Delete</button></td>
                    </tr>
                </tbody>
                <tfoot>
                    <tr class="total-row">
                        <td>Total</td>
                        <td id="total-monthly">$2,500</td>
                        <td id="total-yearly">$30,000</td>
                        <td></td>
                    </tr>
                </tfoot>
            </table>
            <button onclick="addAnnuity()" class="add-button">Add Income Source</button>
        </div>
        
        <div class="card">
            <h2>
                Assumptions
                <span class="tooltip">ⓘ
                    <span class="tooltip-text">These values determine how your retirement savings will grow and be withdrawn over time.</span>
                </span>
            </h2>
            <table id="assumptions-table">
                <tr class="section-header">
                    <td colspan="2">Savings</td>
                </tr>
                <tr>
                    <td>Current Nest Egg ($)</td>
                    <td>
                        <div class="input-with-tooltip">
                            <input type="number" id="current-nest-egg" class="small-input" value="500000">
                            <span class="tooltip">ⓘ
                                <span class="tooltip-text">Your current retirement savings (401k, IRA, etc.)</span>
                            </span>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>Home Value ($)</td>
                    <td>
                        <div class="input-with-tooltip">
                            <input type="number" id="home-value" class="small-input" value="300000">
                            <span class="tooltip">ⓘ
                                <span class="tooltip-text">Current estimated market value of your home</span>
                            </span>
                        </div>
                    </td>
                </tr>

                <tr class="section-header">
                    <td colspan="2">Spending</td>
                </tr>
                <tr>
                    <td>Target Annual Income ($)</td>
                    <td>
                        <div class="input-with-tooltip">
                            <input type="number" id="target-income" class="small-input" value="60000">
                            <span class="tooltip">ⓘ
                                <span class="tooltip-text">Your desired annual income in retirement</span>
                            </span>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>Additional Annual Draw Down ($)</td>
                    <td>
                        <div class="input-with-tooltip">
                            <input type="number" id="draw-down" class="small-input" value="10000">
                            <span class="tooltip">ⓘ
                                <span class="tooltip-text">Amount you need to withdraw beyond your regular income sources</span>
                            </span>
                        </div>
                    </td>
                </tr>

                <tr class="section-header">
                    <td colspan="2">Rates</td>
                </tr>
                <tr>
                    <td>Annual Growth Rate (%)</td>
                    <td>
                        <div class="input-with-tooltip">
                            <input type="number" id="growth-rate" class="small-input" value="4" min="0" max="20" step="0.1">
                            <span class="tooltip">ⓘ
                                <span class="tooltip-text">Expected annual return on investments (historically 6-8% for balanced portfolios)</span>
                            </span>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>Effective Tax Rate (%)</td>
                    <td>
                        <div class="input-with-tooltip">
                            <input type="number" id="tax-rate" class="small-input" value="15" min="0" max="50" step="0.1">
                            <span class="tooltip">ⓘ
                                <span class="tooltip-text">Combined federal and state taxes on withdrawals and investment gains</span>
                            </span>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>Inflation Rate (%)</td>
                    <td>
                        <div class="input-with-tooltip">
                            <input type="number" id="inflation-rate" class="small-input" value="2.5" min="0" max="10" step="0.1">
                            <span class="tooltip">ⓘ
                                <span class="tooltip-text">Expected annual inflation rate (historically averages 2-3%)</span>
                            </span>
                        </div>
                    </td>
                </tr>

                <tr class="section-header">
                    <td colspan="2">Projection</td>
                </tr>
                <tr>
                    <td>Current Age</td>
                    <td>
                        <div class="input-with-tooltip">
                            <input type="number" id="current-age" class="small-input" value="70" min="1" max="120">
                            <span class="tooltip">ⓘ
                                <span class="tooltip-text">Your current age or retirement starting age</span>
                            </span>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>Years to Project</td>
                    <td>
                        <div class="input-with-tooltip">
                            <input type="number" id="projection-years" class="small-input" value="30" min="1" max="50">
                            <span class="tooltip">ⓘ
                                <span class="tooltip-text">How many years to include in the retirement projection</span>
                            </span>
                        </div>
                    </td>
                </tr>
            </table>
            <button onclick="calculateRetirement()">Calculate Retirement Plan</button>
        </div>
        
        <div class="card" style="grid-column: span 2;">
            <h2>Retirement Projection</h2>
            <div class="tabs">
                <div class="tab active" onclick="switchTab('table-tab', this)">Table View</div>
                <div class="tab" onclick="switchTab('chart-tab', this)">Chart View</div>
            </div>
            
            <div id="table-tab" class="tab-content active">
                <div class="results-table">
                    <table id="projection-table" style="border-collapse: collapse;border-spacing: 0;">
                        <thead>
                            <tr>
                                <th>Year</th>
                                <th>Age</th>
                                <th>Starting Nest Egg</th>
                                <th>Income</th>
                                <th>Draw Down</th>
                                <th>Principal Growth</th>
                                <th>Taxes</th>
                                <th>Ending Principal</th>
                            </tr>
                        </thead>
                        <tbody id="projection-body">
                            <!-- Populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
                <div id="nest-egg-warning" class="warning">
                    Warning: Based on current settings, your nest egg will be depleted before end of projection!
                </div>
            </div>
            
            <div id="chart-tab" class="tab-content">
                <div class="chart-container">
                    <canvas id="projectionChart"></canvas>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.1/chart.min.js"></script>
    <script src="scripts.js"></script>
</body>
</html>